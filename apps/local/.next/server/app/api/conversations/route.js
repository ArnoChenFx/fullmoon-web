(()=>{var e={};e.id=602,e.ids=[602],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},2767:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>w,routeModule:()=>l,serverHooks:()=>m,workAsyncStorage:()=>v,workUnitAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{DELETE:()=>d,GET:()=>c,POST:()=>p});var n=r(2076),o=r(9489),a=r(4120),i=r(407),u=r(2981);async function c(e){let{searchParams:t}=new URL(e.url),r=t.get("id");if(r){let e=await i.z.conversation.findUnique({where:{id:r},include:{messages:{orderBy:{createdAt:"asc"}}}});return e?u.NextResponse.json(e):u.NextResponse.json({error:"Conversation not found"},{status:404})}let s=await i.z.conversation.findMany({orderBy:{createdAt:"desc"},select:{id:!0,title:!0,createdAt:!0}});return u.NextResponse.json(s)}async function p(e){let{message:t}=await e.json(),r=t.content.trim().slice(0,80),s=await i.z.conversation.create({data:{title:r}});return u.NextResponse.json(s)}async function d(e){try{let{searchParams:t}=new URL(e.url),r=t.get("id"),s=t.get("deleteAll");if("true"===s)return await i.z.conversation.deleteMany(),u.NextResponse.json({success:!0});if(!r)return u.NextResponse.json({error:"Conversation ID is required"},{status:400});return await i.z.conversation.delete({where:{id:r}}),u.NextResponse.json({success:!0})}catch(e){return console.error("Delete error:",e),u.NextResponse.json({error:"Failed to delete conversation"},{status:500})}}let l=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/conversations/route",pathname:"/api/conversations",filename:"route",bundlePath:"app/api/conversations/route"},resolvedPagePath:"/Users/shiv/dev/mainframe/experiments/fullmoon-web/apps/local/src/app/api/conversations/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:v,workUnitAsyncStorage:x,serverHooks:m}=l;function w(){return(0,a.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:x})}},8035:()=>{},2107:()=>{},407:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});let s=require("@prisma/client"),n=global.prisma||new s.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[120,600],()=>r(2767));module.exports=s})();