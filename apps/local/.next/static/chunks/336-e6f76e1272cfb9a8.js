(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[336],{7336:(e,t,a)=>{Promise.resolve().then(a.bind(a,7825)),Promise.resolve().then(a.bind(a,4115))},7825:(e,t,a)=>{"use strict";a.d(t,{default:()=>en});var s=a(6444),r=a(1751),l=a(2356),n=a(1322),i=a(2784),o=a(5467),d=a(9841),c=a(5168),u=a(5009),m=a(2846),f=a(208),x=a(5475);function h(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,x.QP)((0,f.$)(t))}let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:h("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});p.displayName="Textarea";var g=a(6973);let N=(0,a(498).F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),v=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:n=!1,...i}=e,o=n?g.DX:"button";return(0,s.jsx)(o,{className:h(N({variant:r,size:l,className:a})),ref:t,...i})});v.displayName="Button";var y=a(4322),j=a(1624),b=a(4874);let w={NEW:"new",WAXING_CRESCENT:"waxing-crescent",FIRST_QUARTER:"first-quarter",WAXING_GIBBOUS:"waxing-gibbous",FULL:"full",WANING_GIBBOUS:"waning-gibbous",LAST_QUARTER:"last-quarter",WANING_CRESCENT:"waning-crescent"},C={[w.NEW]:"M14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386C28.8727 6.5186 22.3527 -0.0014 14.4327 -0.0014C6.5127 -0.0014 0.0027 6.5186 0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886Z",[w.WAXING_CRESCENT]:"M0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386C28.8727 6.5186 22.3527 -0.0014 14.4327 -0.0014C6.5127 -0.0014 0.0027 6.5186 0.0027 14.4386ZM25.2827 14.4386C25.2927 20.4286 20.5127 25.2886 14.5327 25.2886C14.3027 25.2886 14.0727 25.2786 13.8327 25.2486C17.0227 22.7886 18.8627 18.9886 18.8627 14.4486C18.8627 9.8986 17.0227 6.0886 13.8227 3.6386C14.0727 3.6086 14.3027 3.5986 14.5427 3.5986C20.5127 3.5986 25.2827 8.4786 25.2827 14.4386Z",[w.FIRST_QUARTER]:"M14.4327 28.8776C22.3627 28.8776 28.8727 22.3676 28.8727 14.4376C28.8727 6.5176 22.3527 -0.0024 14.4327 -0.0024C6.5127 -0.0024 0.0027 6.5176 0.0027 14.4376C0.0027 22.3676 6.5227 28.8776 14.4327 28.8776ZM14.4327 25.2776V3.5976C20.4427 3.5976 25.2827 8.4376 25.2827 14.4376C25.2927 20.4576 20.4527 25.2776 14.4327 25.2776Z",[w.WAXING_GIBBOUS]:"M0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386C28.8727 6.5186 22.3527 -0.0014 14.4327 -0.0014C6.5127 -0.0014 0.0027 6.5186 0.0027 14.4386ZM9.9627 14.4486C9.9627 9.8286 11.7627 6.0286 14.9427 3.6486C20.8327 3.9886 25.2827 8.5986 25.2827 14.4386C25.2927 20.2886 20.8327 24.9086 14.9027 25.2386C11.7427 22.8886 9.9627 19.0986 9.9627 14.4486Z",[w.FULL]:"M14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386C28.8727 6.5186 22.3527 -0.0014 14.4327 -0.0014C6.5127 -0.0014 0.0027 6.5186 0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886ZM14.4327 25.2886C8.4327 25.2886 3.6127 20.4486 3.6127 14.4386C3.6127 8.4386 8.4227 3.5986 14.4327 3.5986C20.4427 3.5986 25.2827 8.4386 25.2827 14.4386C25.2827 20.4486 20.4527 25.2886 14.4327 25.2886Z",[w.WANING_GIBBOUS]:"M28.8727 14.4386C28.8727 6.5186 22.3627 -0.0014 14.4527 -0.0014C6.5227 -0.0014 0.0027 6.5186 0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386ZM18.9227 14.4486C18.9227 19.0986 17.1327 22.8886 13.9727 25.2386C8.0527 24.9086 3.5827 20.2886 3.5927 14.4386C3.6127 8.5986 8.0527 3.9886 13.9427 3.6486C17.1127 6.0286 18.9227 9.8286 18.9227 14.4486Z",[w.LAST_QUARTER]:"M14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386C28.8727 6.5186 22.3627 -0.0014 14.4327 -0.0014C6.5227 -0.0014 0.0027 6.5186 0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886ZM14.4327 25.2886C8.4327 25.2886 3.5827 20.4486 3.5927 14.4386C3.6127 8.4386 8.4327 3.5986 14.4327 3.5986Z",[w.WANING_CRESCENT]:"M28.8727 14.4386C28.8727 6.5186 22.3627 -0.0014 14.4527 -0.0014C6.5227 -0.0014 0.0027 6.5186 0.0027 14.4386C0.0027 22.3686 6.5227 28.8886 14.4327 28.8886C22.3627 28.8886 28.8727 22.3686 28.8727 14.4386ZM3.5927 14.4386C3.6127 8.4786 8.3827 3.5986 14.3327 3.5986C14.5727 3.5986 14.8227 3.6086 15.0527 3.6386C11.8527 6.0886 10.0127 9.8986 10.0127 14.4486C10.0127 18.9886 11.8527 22.7886 15.0427 25.2486C14.8027 25.2786 14.5727 25.2886 14.3427 25.2886C8.3827 25.2886 3.5827 20.4286 3.5927 14.4386Z"},R=e=>{let{phase:t=w.NEW,size:a=24,color:r="currentColor",className:l=""}=e,n=a/28.888671875;return(0,s.jsx)("svg",{width:28.875*n,height:28.888671875*n,viewBox:"0 0 28.875 28.889",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:l,children:(0,s.jsx)("path",{d:C[t],fill:r})})};var A=a(6885),E=a(2801);let k=A.bL;A.l9;let S=A.ZL,T=A.bm,_=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(A.hJ,{ref:t,className:h("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});_.displayName=A.hJ.displayName;let I=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(S,{children:[(0,s.jsx)(_,{}),(0,s.jsxs)(A.UC,{ref:t,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-2xl",a),...l,children:[r,(0,s.jsxs)(A.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(E.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});I.displayName=A.UC.displayName;let z=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:h("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};z.displayName="DialogHeader";let U=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};U.displayName="DialogFooter";let Z=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(A.hE,{ref:t,className:h("text-lg font-semibold leading-none tracking-tight",a),...r})});Z.displayName=A.hE.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(A.VY,{ref:t,className:h("text-sm text-muted-foreground",a),...r})}).displayName=A.VY.displayName;var D=a(6158),L=a(4181),G=a(6088),M=a(1801);let W=D.bL;D.YJ;let B=D.WT,F=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(D.l9,{ref:t,className:h("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,s.jsx)(D.In,{asChild:!0,children:(0,s.jsx)(L.A,{className:"h-4 w-4 opacity-50"})})]})});F.displayName=D.l9.displayName;let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.PP,{ref:t,className:h("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(G.A,{className:"h-4 w-4"})})});O.displayName=D.PP.displayName;let P=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.wn,{ref:t,className:h("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(L.A,{className:"h-4 w-4"})})});P.displayName=D.wn.displayName;let V=r.forwardRef((e,t)=>{let{className:a,children:r,position:l="popper",...n}=e;return(0,s.jsx)(D.ZL,{children:(0,s.jsxs)(D.UC,{ref:t,className:h("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,s.jsx)(O,{}),(0,s.jsx)(D.LM,{className:h("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(P,{})]})})});V.displayName=D.UC.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.JU,{ref:t,className:h("px-2 py-1.5 text-sm font-semibold",a),...r})}).displayName=D.JU.displayName;let q=r.forwardRef((e,t)=>{let{className:a,children:r,...l}=e;return(0,s.jsxs)(D.q7,{ref:t,className:h("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,s.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(D.VF,{children:(0,s.jsx)(M.A,{className:"h-4 w-4"})})}),(0,s.jsx)(D.p4,{children:r})]})});q.displayName=D.q7.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(D.wv,{ref:t,className:h("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=D.wv.displayName;var J=a(436),Q=a(5665);let X=Q.bL;Q.l9;let Y=Q.ZL,H=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.hJ,{className:h("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});H.displayName=Q.hJ.displayName;let K=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(Y,{children:[(0,s.jsx)(H,{}),(0,s.jsx)(Q.UC,{ref:t,className:h("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});K.displayName=Q.UC.displayName;let $=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",t),...a})};$.displayName="AlertDialogHeader";let ee=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ee.displayName="AlertDialogFooter";let et=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.hE,{ref:t,className:h("text-lg font-semibold",a),...r})});et.displayName=Q.hE.displayName;let ea=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.VY,{ref:t,className:h("text-sm text-muted-foreground",a),...r})});ea.displayName=Q.VY.displayName;let es=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.rc,{ref:t,className:h(N(),a),...r})});es.displayName=Q.rc.displayName;let er=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(Q.ZD,{ref:t,className:h(N({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});function el(e){let{isOpen:t,onOpenChange:a}=e,{theme:l,setTheme:n}=(0,J.D)(),[i,o]=(0,r.useState)(!1),d=(0,y.useRouter)(),c=async()=>{try{(await fetch("/api/conversations?deleteAll=true",{method:"DELETE"})).ok?(o(!1),d.replace("/")):console.error("Failed to delete conversations")}catch(e){console.error("Error deleting conversations:",e)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k,{open:t,onOpenChange:a,children:(0,s.jsxs)(I,{className:"sm:max-w-[350px]",children:[(0,s.jsx)(z,{children:(0,s.jsx)(Z,{children:"settings"})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold",children:"appearance"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"text-sm",children:"theme"}),(0,s.jsxs)(W,{value:l,onValueChange:n,children:[(0,s.jsx)(F,{className:"w-[100px] focus:ring-0 focus:ring-offset-0 h-8",children:(0,s.jsx)(B,{placeholder:"Theme"})}),(0,s.jsxs)(V,{children:[(0,s.jsx)(q,{value:"system",children:"system"}),(0,s.jsx)(q,{value:"light",children:"light"}),(0,s.jsx)(q,{value:"dark",children:"dark"})]})]})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold",children:"chats"}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsx)(v,{variant:"destructive",className:"h-8 px-3",onClick:()=>o(!0),children:"delete all conversations"})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-bold",children:"credits"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"version 0.1.0"})]})]}),(0,s.jsx)(U,{className:"sm:justify-start",children:(0,s.jsx)(T,{asChild:!0,children:(0,s.jsx)(v,{type:"button",variant:"secondary",className:"h-8 px-3",children:"close"})})})]})}),(0,s.jsx)(X,{open:i,onOpenChange:o,children:(0,s.jsxs)(K,{children:[(0,s.jsxs)($,{children:[(0,s.jsx)(et,{children:"are you sure?"}),(0,s.jsx)(ea,{children:"are you sure?"})]}),(0,s.jsxs)(ee,{children:[(0,s.jsx)(er,{children:"cancel"}),(0,s.jsx)(es,{onClick:c,className:"bg-red-500 hover:bg-red-600",children:"delete"})]})]})})]})}function en(e){let{convo:t}=e,[a,f]=(0,r.useState)(!1),{isSidebarOpen:x,toggleSidebar:h}=(0,b.c)(),g=(0,y.useRouter)(),[N,C]=(0,r.useState)((null==t?void 0:t.id)||null),[A]=(0,r.useState)(t||null),E=(0,r.useRef)(null),{messages:k,input:S,handleInputChange:T,handleSubmit:_,isLoading:I}=(0,l.Y_)({initialMessages:(null==A?void 0:A.messages)||[],body:{conversationId:N},id:N||"new"}),z=(0,r.useCallback)(()=>{var e;null===(e=E.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[]);(0,r.useEffect)(()=>{k.length>0&&z()},[k,z]),(0,r.useEffect)(()=>{N&&(console.log("fetching Conversation ID:",N),S.trim()&&_(new Event("submit")))},[N]);let U=async e=>{if(e.preventDefault(),S.trim()){if(!N)try{let e=await fetch("/api/conversations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:S.substring(0,100),message:{content:S,role:"user"}})});if(e.ok){let t=await e.json();C(t.id),g.push("/c/".concat(t.id));return}}catch(e){console.error("Failed to create conversation:",e)}_(e)}};return(0,s.jsxs)("div",{className:"flex-1 flex justify-center transition-all duration-200 ease-in-out ".concat(x?"pl-64":"pl-0"),children:[(0,s.jsx)("div",{className:"fixed top-0 left-0 right-0 p-4 bg-background border-b text-center",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-6 transition-all duration-200 ease-in-out ".concat(x?"ml-64":"ml-20"),children:[(0,s.jsx)("h1",{className:"text-md font-bold",children:(null==A?void 0:A.title)||"chat"}),(0,s.jsx)(v,{variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-300",onClick:()=>f(!0),children:(0,s.jsx)(n.A,{className:"h-3 w-3"})})]})}),(0,s.jsxs)("div",{className:"fixed top-4 left-4 z-40 flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:h,className:"p-2 rounded-full bg-secondary hover:bg-secondary/80",children:(0,s.jsx)(i.A,{className:"h-3 w-3"})}),(0,s.jsx)(j.default,{href:"/",className:"p-2 hover:rounded-full hover:bg-secondary/80",children:(0,s.jsx)(o.A,{className:"h-3 w-3"})})]}),(0,s.jsxs)("main",{className:"w-full max-w-2xl p-4 mt-16 mb-16",children:[0===k.length?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center h-[calc(100vh-200px)]",children:(0,s.jsx)(R,{phase:(()=>{switch(function(){let e=new Date,t=new Date(2e3,0,6),a=(e.getTime()-t.getTime())/864e5%29.53;return a<1.8457?"new":a<5.536?"waxing-crescent":a<9.228?"first-quarter":a<12.919?"waxing-gibbous":a<16.61?"full":a<20.302?"waning-gibbous":a<23.993?"last-quarter":a<27.684?"waning-crescent":"new"}()){case"new":default:return w.NEW;case"waxing-crescent":return w.WAXING_CRESCENT;case"first-quarter":return w.FIRST_QUARTER;case"waxing-gibbous":return w.WAXING_GIBBOUS;case"full":return w.FULL;case"waning-gibbous":return w.WANING_GIBBOUS;case"last-quarter":return w.LAST_QUARTER;case"waning-crescent":return w.WANING_CRESCENT}})(),size:48,color:"currentColor"})}):(0,s.jsx)("div",{className:"space-y-4",children:k.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-[80%] rounded-3xl px-4 py-2 ".concat("user"===e.role?"bg-secondary text-foreground":"text-foreground"),children:(0,s.jsxs)("p",{className:"whitespace-pre-wrap",children:[e.content,I&&t===k.length-1&&"assistant"===e.role&&"\uD83C\uDF15"]})})},e.id))}),(0,s.jsx)("div",{ref:E})]}),(0,s.jsx)("div",{className:"fixed bottom-0 w-full bg-background",children:(0,s.jsx)("form",{onSubmit:U,className:"relative",children:(0,s.jsx)("div",{className:"max-w-2xl mx-auto w-full",children:(0,s.jsxs)("div",{className:"flex flex-col m-4 px-2 py-1 bg-secondary rounded-3xl",children:[(0,s.jsx)(p,{value:S,onChange:T,placeholder:"ask me anything...",rows:1,onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U(e))},className:"w-full border-none text-foreground placeholder:text-gray-400 resize-none focus-visible:ring-0 focus-visible:ring-offset-0 min-h-[36px] align-middle shadow-none"}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-0",children:[(0,s.jsx)(v,{type:"button",variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-300",children:(0,s.jsx)(d.A,{className:"h-5 w-5"})}),(0,s.jsx)(v,{type:"button",variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-300",children:(0,s.jsx)(c.A,{className:"h-5 w-5"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-0",children:[(0,s.jsx)(v,{type:"button",variant:"ghost",size:"icon",className:"text-gray-400 hover:text-gray-300",children:(0,s.jsx)(u.A,{className:"h-5 w-5"})}),(0,s.jsx)(v,{type:"submit",variant:"ghost",size:"icon",disabled:I||!S.trim(),className:"text-gray-400 hover:bg-background hover:text-primary rounded-full",children:(0,s.jsx)(m.A,{className:"h-5 w-5"})})]})]})]})})})}),(0,s.jsx)(el,{isOpen:a,onOpenChange:f})]})}er.displayName=Q.ZD.displayName},4115:(e,t,a)=>{"use strict";a.d(t,{default:()=>u});var s=a(6444),r=a(1751),l=a(1624),n=a(2784),i=a(5467),o=a(2212),d=a(4874),c=a(4322);function u(){let{isSidebarOpen:e,setIsSidebarOpen:t}=(0,d.c)(),[a,u]=(0,r.useState)([]),m=(0,c.usePathname)(),f=(0,c.useRouter)(),x=(0,r.useCallback)(async()=>{let e=await fetch("/api/conversations");u(await e.json())},[]);(0,r.useEffect)(()=>{x()},[x]);let h=async(e,t)=>{t.preventDefault();try{(await fetch("/api/conversations?id=".concat(e),{method:"DELETE"})).ok&&(m==="/c/".concat(e)&&f.replace("/"),await x())}catch(e){console.error("Failed to delete conversation:",e)}};return(0,s.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-background border-r transform transition-transform duration-200 ease-in-out ".concat(e?"translate-x-0":"-translate-x-full"),children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:()=>t(!1),className:"p-2 rounded-full bg-secondary hover:bg-secondary/80",children:(0,s.jsx)(n.A,{className:"h-3 w-3"})}),(0,s.jsx)(l.default,{href:"/",className:"p-2 rounded-full hover:rounded-full hover:bg-secondary/80",children:(0,s.jsx)(i.A,{className:"h-3 w-3"})})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsx)("div",{className:"p-4 space-y-2",children:a.map(e=>(0,s.jsxs)(l.default,{href:"/c/".concat(e.id),className:"group block p-2 rounded-lg hover:bg-secondary/80 transition-colors relative",children:[(0,s.jsxs)("div",{className:"text-sm",children:[e.title,(0,s.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,s.jsx)("button",{type:"button",onClick:t=>h(e.id,t),className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 p-1 hover:bg-destructive/10 rounded transition-opacity",children:(0,s.jsx)(o.A,{className:"h-4 w-4 text-destructive"})})]},e.id))})})]})})}},4874:(e,t,a)=>{"use strict";a.d(t,{SidebarProvider:()=>n,c:()=>i});var s=a(6444),r=a(1751);let l=(0,r.createContext)(void 0);function n(e){let{children:t}=e,[a,n]=(0,r.useState)(!1);return(0,s.jsx)(l.Provider,{value:{isSidebarOpen:a,setIsSidebarOpen:n,toggleSidebar:()=>n(e=>!e)},children:t})}function i(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useSidebar must be used within a SidebarProvider");return e}}}]);